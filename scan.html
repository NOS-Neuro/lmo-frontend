<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Run VizAI Scan | VizAI</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
</head>
<body class="bg-white font-sans antialiased">
  <custom-navbar></custom-navbar>

  <main>
    <section class="min-h-screen py-20">
      <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-16">
          <h1 class="text-4xl font-bold text-gray-900 mb-4">Run VizAI Scan</h1>
          <p class="text-xl text-gray-600">
            Discover how AI is likely to understand and represent your business.
          </p>
          <p class="text-sm text-gray-500 mt-3">
            VizAI uses a GPT-powered model to estimate your AI visibility across three dimensions:
            Discovery, Accuracy, and Authority.
          </p>
        </div>

        <!-- Scan Form -->
        <div class="bg-white rounded-xl shadow-md overflow-hidden border border-gray-100">
          <div class="p-8">
            <form id="scanForm" class="space-y-6">
              <div>
                <label for="businessName" class="block text-sm font-medium text-gray-700 mb-1">
                  Business Name
                </label>
                <input
                  type="text"
                  id="businessName"
                  name="businessName"
                  required
                  class="w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-gray-900 focus:border-gray-900"
                  placeholder="Your company name"
                />
              </div>

              <div>
                <label for="website" class="block text-sm font-medium text-gray-700 mb-1">
                  Website URL
                </label>
                <input
                  type="url"
                  id="website"
                  name="website"
                  required
                  class="w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-gray-900 focus:border-gray-900"
                  placeholder="https://yourbusiness.com"
                />
              </div>

              <p class="text-xs text-gray-500">
                The scan doesn’t crawl your site. It uses your name and domain to estimate how modern AI systems are likely to interpret your business.
              </p>

              <div>
                <button
                  type="submit"
                  class="w-full px-6 py-3 bg-black text-white rounded-md hover:bg-gray-900 transition font-medium flex items-center justify-center gap-2"
                >
                  <span id="submitIcon">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="20"
                      height="20"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    >
                      <polygon points="5 3 19 12 5 21 5 3"></polygon>
                    </svg>
                  </span>
                  <span id="submitLabel">Run Scan</span>
                </button>
              </div>

              <p id="scanError" class="text-sm text-red-600 hidden">
                Something went wrong running the scan. Please try again in a moment.
              </p>
            </form>
          </div>
        </div>

        <!-- Results -->
        <div id="results" class="mt-12 hidden">
          <div class="bg-white rounded-xl shadow-md overflow-hidden border border-gray-100">
            <div class="p-8">
              <h2 class="text-2xl font-bold text-gray-900 mb-6">Scan Results</h2>

              <div id="resultsOverview" class="mb-6 text-gray-700 text-sm"></div>

              <!-- Scores -->
              <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
                <div class="border border-gray-200 rounded-lg p-4">
                  <div class="text-xs font-semibold text-gray-500 uppercase tracking-wide mb-1">
                    Discovery
                  </div>
                  <div id="discoveryScore" class="text-3xl font-bold text-gray-900">–</div>
                  <p class="text-xs text-gray-500 mt-1">
                    How easily AI is likely to find and recognize your business.
                  </p>
                </div>
                <div class="border border-gray-200 rounded-lg p-4">
                  <div class="text-xs font-semibold text-gray-500 uppercase tracking-wide mb-1">
                    Accuracy
                  </div>
                  <div id="accuracyScore" class="text-3xl font-bold text-gray-900">–</div>
                  <p class="text-xs text-gray-500 mt-1">
                    How well AI is likely to describe what you actually do.
                  </p>
                </div>
                <div class="border border-gray-200 rounded-lg p-4">
                  <div class="text-xs font-semibold text-gray-500 uppercase tracking-wide mb-1">
                    Authority
                  </div>
                  <div id="authorityScore" class="text-3xl font-bold text-gray-900">–</div>
                  <p class="text-xs text-gray-500 mt-1">
                    How confidently AI is likely to rely on your business vs. other sources.
                  </p>
                </div>
                <div class="border border-gray-200 rounded-lg p-4 bg-gray-50">
                  <div class="text-xs font-semibold text-gray-500 uppercase tracking-wide mb-1">
                    Average Score
                  </div>
                  <div id="averageScore" class="text-3xl font-bold text-gray-900">–</div>
                  <p class="text-xs text-gray-500 mt-1">
                    Overall AI visibility score from 0–100.
                  </p>
                </div>
              </div>

              <!-- How to read your score -->
              <div class="mb-8">
                <h3 class="text-sm font-semibold text-gray-800 mb-2">
                  How to read your scores
                </h3>
                <ul class="text-xs text-gray-600 space-y-1">
                  <li><span class="font-semibold">0–39:</span> Critical AI visibility risk — AI may not identify or describe you correctly.</li>
                  <li><span class="font-semibold">40–79:</span> Partial understanding — gaps and inconsistencies likely affecting recommendations.</li>
                  <li><span class="font-semibold">80–100:</span> Strong AI visibility — focus on maintaining and monitoring over time.</li>
                </ul>
              </div>

              <!-- Recommended package & strategy -->
              <div class="mb-8 border border-gray-200 rounded-lg p-5 bg-slate-50">
                <h3 class="text-sm font-semibold text-gray-800 mb-1">
                  Recommended VizAI Plan
                </h3>
                <p class="text-sm text-gray-900">
                  <span class="font-semibold">Package:</span>
                  <span id="recommendedPackage">–</span>
                </p>
                <p id="strategyText" class="text-sm text-gray-600 mt-2">
                  <!-- strategy goes here -->
                </p>
              </div>

              <!-- Key findings -->
              <div>
                <h3 class="text-sm font-semibold text-gray-800 mb-2">Key Findings</h3>
                <ul id="findingsList" class="list-disc pl-5 space-y-1 text-sm text-gray-700">
                  <!-- findings go here -->
                </ul>
              </div>

              <div class="mt-8 flex flex-wrap gap-3">
                <a href="index.html#pricing" class="inline-flex items-center px-4 py-2 border border-gray-900 text-gray-900 text-sm rounded-md hover:bg-gray-900 hover:text-white transition">
                  View VizAI Packages
                </a>
                <a href="contact.html" class="inline-flex items-center px-4 py-2 border border-transparent bg-gray-900 text-white text-sm rounded-md hover:bg-black transition">
                  Talk about an AI visibility plan
                </a>
              </div>
            </div>
          </div>
        </div>

      </div>
    </section>
  </main>

  <custom-footer></custom-footer>

  <script src="components/navbar.js"></script>
  <script src="components/footer.js"></script>
  <script>
    // Replace with your actual backend URL if it changes
    const VIZAI_BACKEND_URL = "https://lmo-backend.onrender.com/run_scan";

    const form = document.getElementById("scanForm");
    const resultsSection = document.getElementById("results");
    const scanError = document.getElementById("scanError");

    const discoveryEl = document.getElementById("discoveryScore");
    const accuracyEl = document.getElementById("accuracyScore");
    const authorityEl = document.getElementById("authorityScore");
    const averageEl = document.getElementById("averageScore");
    const packageEl = document.getElementById("recommendedPackage");
    const strategyEl = document.getElementById("strategyText");
    const findingsList = document.getElementById("findingsList");
    const resultsOverview = document.getElementById("resultsOverview");

    const submitLabel = document.getElementById("submitLabel");
    const submitIcon = document.getElementById("submitIcon");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      scanError.classList.add("hidden");
      resultsSection.classList.add("hidden");

      const businessName = document.getElementById("businessName").value.trim();
      const website = document.getElementById("website").value.trim();

      if (!businessName || !website) return;

      // Loading state
      submitLabel.textContent = "Scanning...";
      submitIcon.classList.add("animate-pulse");
      form.querySelector("button[type='submit']").disabled = true;

      try {
        const resp = await fetch(VIZAI_BACKEND_URL, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({
            businessName,
            website,
            models: ["chatgpt"] // reserved for future use
          }),
        });

        if (!resp.ok) {
          throw new Error("Non-200 response from backend");
        }

        const data = await resp.json();

        const discovery = data.discovery_score ?? 0;
        const accuracy = data.accuracy_score ?? 0;
        const authority = data.authority_score ?? 0;
        const avg = Math.round((discovery + accuracy + authority) / 3);

        discoveryEl.textContent = discovery;
        accuracyEl.textContent = accuracy;
        authorityEl.textContent = authority;
        averageEl.textContent = avg;

        packageEl.textContent = data.recommended_package || "Standard";
        strategyEl.textContent = data.strategy || "";

        // Overview text
        resultsOverview.innerHTML = `
          <p class="text-sm text-gray-700">
            For <span class="font-semibold">${businessName}</span> (${website}),
            VizAI estimates how modern AI systems are likely to see your business
            across three dimensions: Discovery, Accuracy, and Authority.
          </p>
        `;

        // Findings list
        findingsList.innerHTML = "";
        if (Array.isArray(data.findings)) {
          data.findings.forEach((item) => {
            const li = document.createElement("li");
            li.textContent = item;
            findingsList.appendChild(li);
          });
        }

        resultsSection.classList.remove("hidden");
      } catch (err) {
        console.error(err);
        scanError.classList.remove("hidden");
      } finally {
        // Reset button
        submitLabel.textContent = "Run Scan";
        submitIcon.classList.remove("animate-pulse");
        form.querySelector("button[type='submit']").disabled = false;
      }
    });

    feather.replace();
  </script>
</body>
</html>



